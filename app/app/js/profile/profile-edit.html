<ion-view view-title="{{'EDIT_PROFILE_TITLE' | translate}}" cache-view="false" ng-controller="ProfileEdit as vm">

    <ion-nav-bar class="bar-positive">
        <ion-nav-back-button class="button-clear" ng-click="vm.myGoBack()">
            <i class="icon ion-ios-arrow-back"></i>
        </ion-nav-back-button>
    </ion-nav-bar>
    <ion-nav-buttons side="primary">
        <i class="button button-icon icon ion-arrow-swap" ng-click="vm.swapPhotos()" ng-if="vm.selectedCount() == 2" ng-cloak></i>
        <i class="button button-icon icon ion-ios-trash" ng-click="vm.deletePhotos()" ng-if="vm.canDeletePhotos()" ng-cloak></i>
    </ion-nav-buttons>

    <ion-content padding="true">
        <div class="about-you-header"><b class="padding-5">My Photos</b>
        </div>
        <div class="row">
            <div class="col col-33" ng-repeat="photo in vm.photos track by $index">
                <img ng-class="photo.selected ? 'profileImageSelected' : 'profileImage'" ng-click="vm.toggleSelected(photo)" ng-src="{{photo.file.url()}}" class="profileImg">
            </div>
            <div class="col col-33" id="addPhoto" ng-if="vm.canAddPhoto()">
                <img ng-src="{{vm.NO_IMAGE}}" ng-click="vm.addPhoto()" class="profileImg" />
            </div>
            <!-- TODO could have some placeholder images in the other empty spots so there isn't odd looking empty space -->
        </div>

        <div ng-if="vm.photosInReview.length">
            Awaiting Review
        </div>
        <div class="row" ng-if="vm.photosInReview.length">
            <div class="col col-33" ng-repeat="photo in vm.photosInReview track by $index">
                <img ng-class="photo.selected ? 'profileImageSelected' : 'profileImage'" ng-click="vm.toggleSelected(photo)" ng-src="{{photo.file.url()}}" class="profileImg">
            </div>
        </div>

        <br/>
        <div>
            <div class="about-you-header"><b class="padding-5">About You</b>
            </div>
            <h5 class="about-you-info padding-5">{{'ABOUT_YOU' | translate}}</h5>

            <div ng-class="!vm.about ? 'red-border' : ''">
                <textarea rows="6" class="wide input-grey text-size-18 padding-15 " placeholder="Type Here..." id="aboutYou" ng-model="vm.about" ng-keyup="vm.expandText()" ng-keydown="vm.expandText()">
                    </textarea>

            </div>

            <div ng-hide="vm.profile.about != vm.about || vm.about" class="more-information-error">
                <p>* You still need to write a little about yourself.</p>
            </div>
            <br/>
        </div>


        <!--Self definition filter cards. -->

        <div class="about-you-header"><b class="padding-5">About Why You're Here</b>
            <div ng-init="isTierOneOpen = true; isTierTwoOpen = false; isTierThreeOpen = false;">
                <!--Tier one-->
                <div class="card" ng-show="isTierOneOpen">

                    <ion-radio name="category" ng-model="vm.personCategory" value="1">Its just me for now.</ion-radio>
                    <ion-radio name="category" ng-model="vm.personCategory" value="2">I'm here with my partner.</ion-radio>
                    <ion-radio name="category" ng-model="vm.personCategory" value="3">I represent an organization.</ion-radio>

                    <!--NAV BUTTONS-->
                    <div class="nav-button-row-filter-card">
                        <div class="nav-button-container-center">
                            <a class="button button-icon icon ion-arrow-right-a text-colour-energized" ng-hide="!vm.personCategory || vm.personCategory == '3'" ng-click="isTierOneOpen = false; isTierTwoOpen = true;"></a>
                        </div>
                    </div>
                </div>

                <!--Tier Two-->
                <div class="card" style="padding: 10px;" ng-show="isTierTwoOpen">

                    <ion-radio name="personType" ng-model="vm.personType" value="1">I'm not quite ready but I'm certainly curious</ion-radio>
                    <ion-radio name="personType" ng-model="vm.personType" value="2">I'm ready now, I'm pretty serious.</ion-radio>

                    <!--NAV BUTTONS-->
                    <div class="nav-button-row-filter-card">
                        <div class="nav-button-container-left">
                            <a class="button button-icon icon ion-arrow-left-a text-colour-energized" ng-click="isTierThreeOpen = false; isTierTwoOpen = false; isTierOneOpen = true"></a>
                        </div>
                        <div class="nav-button-container-right">
                            <a class="button button-icon icon ion-arrow-right-a text-colour-energized" ng-hide="!vm.personType || vm.personType == '0'" ng-click="isTierOneOpen = false; isTierTwoOpen = false; isTierThreeOpen = true;"></a>
                        </div>
                    </div>
                </div>

                <!--Tier Three-->
                <div class="card" ng-show="isTierThreeOpen">

                    <ion-toggle ng-model="vm.personSperm" toggle-class="toggle-assertive">I have plenty of sperm</ion-toggle>
                    <ion-toggle ng-model="vm.personEgg" toggle-class="toggle-assertive">I am good for eggs</ion-toggle>
                    <ion-toggle ng-model="vm.personWomb" toggle-class="toggle-assertive">I have a womb and plan to use it</ion-toggle>
                    <ion-toggle ng-model="vm.personEmbryo" toggle-class="toggle-assertive">I have an embryo in the freezer</ion-toggle>

                    <!--NAV BUTTONS-->
                    <div class="nav-button-row-filter-card">
                        <div class="nav-button-container-left">
                            <a class="button button-icon icon ion-arrow-left-a text-colour-energized" ng-click="isTierOneOpen = false; isTierTwoOpen = true; isTierThreeOpen = false; "></a>
                        </div>
                        <div class="nav-button-container-right">
                            <a class="button button-icon icon ion-arrow-right-a text-colour-energized" ng-click="isTierOneOpen = false; isTierTwoOpen = false; isTierThreeOpen = false; isTierFourOpen = true"></a>
                        </div>
                    </div>

                </div>
                <div class="card" ng-show="isTierFourOpen">
                    <ion-radio name="personHelpLevel" ng-model="vm.personHelpLevel" value="1">I'd consider helping someone maybe.</ion-radio>
                    <ion-radio name="personHelpLevel" ng-model="vm.personHelpLevel" value="2">I'm primarily here to help others.</ion-radio>
                    <ion-radio name="personHelpLevel" ng-model="vm.personHelpLevel" value="3">I'm not able to help others at all.</ion-radio>

                    <!--NAV BUTTONS-->
                    <div class="nav-button-row-filter-card">
                        <div class="nav-button-container-center">
                            <a class="button button-icon icon ion-arrow-left-a text-colour-energized" ng-click="isTierOneOpen = false; isTierTwoOpen = false; isTierThreeOpen = true; isTierFourOpen = false "></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-align center padding-25">
            <button class="button button-positive" ng-click="vm.saveProfile()">&nbsp;{{'SAVE' | translate}}&nbsp;</button>
        </div>
    </ion-content>
</ion-view>